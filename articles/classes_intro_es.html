<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<link type="text/css" rel="stylesheet" href="../styles/vs.css">
<link type="text/css" rel="stylesheet" href="../styles/markdown.css">

	</head>
<body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-58458282-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58458282-5');
</script>
<h1>Introducción a Clases, Herencia y Polimorfismo en JavaScript</h1>
<h1>Clases</h1>
<p>Muchas veces queremos representar una idea o un concepto en nuestros programas — tal vez un usuario, un archivo, una suscripción, o una lectura de la temperatura. <br/>
Si puedes pensar en algo como una entidad distinta, es probable que debas definir una clase para representar esa &quot;cosa&quot; en tu programa.</p>
<h2>La representación de estos conceptos en el código tiene dos partes:</h2>
<ul>
<li>Los datos representando el <em>estado</em></li>
<li>Las funciones representan el <em>comportamiento</em></li>
</ul>
<h2>Facilidad para modelar nuestro conceptos y comportamientos</h2>
<p>Las clases nos dan una sintaxis conveniente para definir el estado y el comportamiento de los objetos que representarán nuestros conceptos.
<br/></p>
<h2>Integridad de estado y Inicialización</h2>
<p>Hacen que nuestro código sea más seguro garantizando que se llamará una función de <em><strong>inicialización</strong></em>, y facilitan la definición de un <strong><em>conjunto fijo de funciones</em></strong> que operan en esos datos y mantienen el <em><strong>estado válido</strong></em>.</p>
<h3>Mira atentamente ese código, que no usa clases. ¿Cuántos problemas o errores encuentras? ¿Cómo lo arreglarías?</h3>
<pre><code class="language-javascript"><span class="hljs-comment">// assigna hoy el Octubre 24</span>
<span class="hljs-keyword">let</span> hoy = {
    <span class="hljs-attr">dia</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">mes</span>: <span class="hljs-number">24</span>,
};

<span class="hljs-keyword">let</span> manana = {
    <span class="hljs-attr">ano</span>: hoy.ano,
    <span class="hljs-attr">mes</span>: hoy.mes,
    <span class="hljs-attr">dia</span>: hoy.dia + <span class="hljs-number">1</span>,
};

<span class="hljs-keyword">let</span> pasadoManana = {
    <span class="hljs-attr">ano</span>: manana.ano,
    <span class="hljs-attr">mes</span>: manana.mes,
    <span class="hljs-attr">dia</span>: manana.dia + <span class="hljs-number">1</span> &lt;= <span class="hljs-number">31</span> ? manana.dia + <span class="hljs-number">1</span> : <span class="hljs-number">1</span>,
};
</code></pre>
<p>El objeto <strong>hoy</strong> no es valido, no hay un mes 24. También no esta completamente inicializado, falta el <span class="hljs-attr"><strong>ano</strong></span>.
Seria mucho mejor tener una función que inicializa todo correcto y no se puede olvidar. <br/>
Tambien nota que añadiendo un dia, verificamos si no sobre pasa 31, pero solo en un lugar, no en el objeto <strong>manana</strong>.</p>
<h3>Mucho mejor si interactuamos con estos objetos solo via unos funciones que cada uno mantenga los objetos en un estado valido.</h3>
<h2>Version mejorado usando clases</h2>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FechaSimple</span> </span>{
    <span class="hljs-keyword">constructor</span>(dia, mes, ano){
        <span class="hljs-keyword">this</span>._dia = dia;
        <span class="hljs-keyword">this</span>._mes = mes;
        <span class="hljs-keyword">this</span>._ano = ano;
    }
    anadirDias(nDias)
    {
        <span class="hljs-keyword">this</span>._dia += nDias; 
    }
    obtenerDia()
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._dia;
    }
}

<span class="hljs-keyword">let</span> hoy = <span class="hljs-keyword">new</span> FechaSimple(<span class="hljs-number">24</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2018</span>); <span class="hljs-comment">//Garantizado ser inicializado correcto </span>

<span class="hljs-comment">//Manipulando solo a traves unos funciones 'autorizados' asegura que el estado se mantiene valido</span>
hoy.anadirDias(<span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(hoy.obtenerDias());

</code></pre>
<ul>
<li>
<h2>Las funciones que pertenecen a los objetos a menudo se llaman <strong>métodos</strong>.</h2>
</li>
<li>
<h2>Cuado creamos un objeto de una clase, ese objeto es una <strong>instancia</strong> de la clase.</h2>
</li>
</ul>
<h1>Metodo constructor</h1>
<p>Es un metodo especial, resolve el primer problema inicializando el objeto siempre en la misma manera, y no se puede olvidar.
Es la unica manera crear un objecto de un clase.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> hoy = <span class="hljs-keyword">new</span> FechaSimple(<span class="hljs-number">24</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2018</span>); <span class="hljs-comment">//Llama el constructor del FechaSimple con los argumentos</span>
</code></pre>
<h2>Validez del los datos y el estado del objeto</h2>
<p>Intentamos diseñar nuestros clases en una manera que garantiza que su estado esta valida. Usando un <code>constructor</code> que sabes iniciar solo con valores validos. Creando métodos que solo cambian valores en una manera que deja los valores del objeto siempre en un estado valido.</p>
<p>Obviamente, solo el hecho que tenemos un <code>constructor</code> y métodos no garantiza el validez. <em><strong>PERO</strong></em>, si hemos equivocado hay un lugar concreto y facil encontrar donde corregir los errores.</p>
<h2>Proteger los datos del objeto</h2>
<p>Para asegurarnos que nada o nadie altera los datos del objeto fuera de los métodos <em>oficiales</em> seria bueno si podríamos proteger los datos o propiedades de alteración directa, fuer de los métodos diseñado por tal fin.</p>
<p>En <code>JavaScript</code> y los clases no hay desafortunadamente ningún mecanismo inherente o nativo para hacer esto. Tenemos que hacerlo usando convenciones, y nuestra propia disciplina para cumplirlo. En otros lenguajes de programación en muchas ocasiones hay palabra claves para proteger los miembros (propiedades) del los clases y objetos.</p>
<p>Si prestaba atención en el ejemplo arriba del clase <span class="hljs-title">FechaSimple</span> los propiedades tiene un prefijo <strong>'<code>_</code>'</strong> como <strong><code>_dia</code></strong>  etc. Así, podemos usar la convención que propiedades con ese prefijo son <em><strong>privados</strong></em> y no se debe usar no tocar fuera del clase que los defina.</p>
<h2>Propiedades en clases</h2>
<p>En las declaraciones de clases, no se declara simple propiedades como en los objetos, por ejemplo <span class="hljs-attr">dia</span> y <span class="hljs-attr">mes</span> abajo.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> o = fecha {
    <span class="hljs-attr">dia</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">mes</span>: <span class="hljs-number">12</span>
}
</code></pre>
<p>Para añadir propiedades en los clases, se crea o añade los propiedades en el <span class="hljs-keyword">constructor</span> como:</p>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fecha</span> </span>{
    <span class="hljs-keyword">constructor</span>(dia, mes)
    {
        <span class="hljs-keyword">this</span>.dia = dia;
        <span class="hljs-keyword">this</span>.mes = mes;
    }
}
</code></pre>
<p>Esto crea dos propiedades en los objetos instanciado del clases <span class="hljs-title">Fecha</span> y se puede acceder y usar como de siempre:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> hoy = <span class="hljs-keyword">new</span> Fecha(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// 4 de marzo</span>

<span class="hljs-built_in">console</span>.log(hoy.dia); <span class="hljs-comment">// 4</span>

</code></pre>
<h2>Métodos <strong><code>get</code></strong> y <strong><code>set</code></strong> (getter y setter)</h2>
<p>Pero, si creamos los propiedades como arriba, es facil acceder y alterarlo sin darse cuenta, usando la convención de _ hacemos la misma pero 'esconderlos' con la convención.
Ya solo falta una manera de acceder y alerar estos datos en una manera segura y controlada. Por eso en los clases tenemo los metodos <code>get</code> y <code>set</code>.</p>
<h3>El método <strong><code>get</code></strong></h3>
<p>El método <code>get</code> es una función que se comporta como una propiedad, para llamarle no hace falta los brackets o paréntesis <strong>()</strong>, y retorna un valor.</p>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fecha</span> </span>{
...
    get mes()
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._mes;
    }
...
}
<span class="hljs-keyword">let</span> f = <span class="hljs-keyword">new</span> Fecha(...);
<span class="hljs-built_in">console</span>.log(f.mes);

</code></pre>
<h3>El método <strong><code>set</code></strong></h3>
<p>El método  <code>set</code> es una función que se comporta como una propiedad, se recibe un parametro representando el valor que queremos asignar, pero para llamarle no hace falta los brackets/paréntesis (), solo el sintaxis para asignar valor con <strong><code>=</code></strong> .</p>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fecha</span> </span>{
...
    set dia(dia){
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._dia = dia;
    }
...
}
<span class="hljs-keyword">let</span> f = <span class="hljs-keyword">new</span> Fecha(...);
f.dia = <span class="hljs-number">23</span>;

</code></pre>
<h2>Ejemplo: Clase con métodos <strong><code>get</code></strong> y <strong><code>set</code></strong></h2>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fecha</span> </span>{
    <span class="hljs-keyword">constructor</span>(dia, mes)
    {
        <span class="hljs-keyword">this</span>._dia = dia;
        <span class="hljs-keyword">this</span>._mes = mes;
    }
    get mes()
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._mes;
    }
    get dia(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._dia;
    }
    set dia(dia){
        <span class="hljs-keyword">let</span> diferencia = dia;
        <span class="hljs-keyword">while</span>(diferencia&gt;<span class="hljs-number">31</span>) <span class="hljs-comment">// Mientras nos queda mas que 31, incrementamos el mes</span>
        {
            diferencia = diferencia - <span class="hljs-number">31</span>;
            <span class="hljs-keyword">this</span>._mes++;
        }
        <span class="hljs-keyword">this</span>._dia = diferencia; <span class="hljs-comment">// Lo que queda es el dia en el mes actual</span>
    }
}
</code></pre>
<h2>El uso de estas propiedades es igual qua cualquiera normal</h2>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> f = <span class="hljs-keyword">new</span> Fecha(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);
f.dia = <span class="hljs-number">64</span>;
<span class="hljs-built_in">console</span>.log(f.dia, f.mes); <span class="hljs-comment">// 2 3</span>
</code></pre>
<h2>Grandes ventajas con <strong><code>get</code></strong> y <strong><code>set</code></strong></h2>
<p>En los dos casos, con el get y el set podemos <em><strong>interceptar el acceso</strong></em>, igual leyendo el valor y asignando un valor. Así se pueden añadir logico, o cálculos etc. al los propiedades cuando están leídos o asignados.</p>
<p>También con <strong><code>get</code></strong> podemos hacer un <em>propiedad de solo lectura</em>, simplemente no implementamos ninguno método <strong><code>set</code></strong> con el mismo nombre. Así solo hay <em>una funcion para leer</em> el valor, y ninguna para asignar un valor.</p>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Lectura</span>
</span>{
    <span class="hljs-keyword">constructor</span>(nombre)
    {
        <span class="hljs-keyword">this</span>._nombre = nombre;
    }
    get Nombre() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._nombre;
    }
}

<span class="hljs-keyword">let</span> obj = <span class="hljs-keyword">new</span> Lectura(<span class="hljs-string">"Solo Lectura"</span>);
<span class="hljs-built_in">console</span>.log(obj.Nombre);
obj.Nombre = <span class="hljs-string">"No funciona!"</span>;

</code></pre>
<img src="./OnlyGetter.png" alt="Exception has occurred: TypeError Cannot set property Nombre of #<Lectura> which has only a getter" title="Exception has occurred: TypeError Cannot set property Nombre of #<Lectura> which has only a getter">
<h2>Propiedades calculadas</h2>
<p>Con <strong><code>get</code></strong> y <strong><code>set</code></strong> puedes tener propiedades <em>virtuales</em>, es decir actúan como propiedades pero no hay una sola pieza de datos que les corresponda. También se pueden considerar propiedades calculadas.</p>
<h2><strong><code>get</code></strong> calculado de otros datos</h2>
<h3><strong>nombre</strong></h3>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Persona</span> </span>{
    <span class="hljs-keyword">constructor</span>(nombre_de_pila, apellidos)
    {
        <span class="hljs-keyword">this</span>._nombre_de_pila = nombre_de_pila;
        <span class="hljs-keyword">this</span>._apellidos = apellidos;
    }
    get nombre()
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._nombre_de_pila + <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>._apellidos;
    }
}
<span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> Persona(<span class="hljs-string">"Jonas"</span>, <span class="hljs-string">"Brandel"</span>);
<span class="hljs-built_in">console</span>.log(p.nombre);
</code></pre>
<h3><strong>fecha</strong></h3>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fecha</span> </span>{
    <span class="hljs-keyword">constructor</span>(dia, mes, ano)
    {
        <span class="hljs-keyword">this</span>._dia = dia;
        <span class="hljs-keyword">this</span>._mes = mes;
        <span class="hljs-keyword">this</span>._ano = ano;
    }
    get fecha(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._dia + <span class="hljs-string">"/"</span> + <span class="hljs-keyword">this</span>._mes + <span class="hljs-string">"/"</span> + <span class="hljs-keyword">this</span>._ano;
    }
}
</code></pre>
<h2>Propiedad <strong><code>set</code></strong> parseado (deconstruido) en sus partes</h2>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fecha</span> </span>{
    <span class="hljs-keyword">constructor</span>(dia, mes, ano)
    {
        <span class="hljs-keyword">this</span>._dia = dia;
        <span class="hljs-keyword">this</span>._mes = mes;
        <span class="hljs-keyword">this</span>._ano = ano;
    }
    get ano()
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._ano;
    }
    get fecha(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._dia + <span class="hljs-string">"/"</span> + <span class="hljs-keyword">this</span>._mes + <span class="hljs-string">"/"</span> + <span class="hljs-keyword">this</span>._ano;
    }
    set fecha(fechaCompuesta)
    {
        <span class="hljs-keyword">let</span> partes = fechaCompuesta.split(<span class="hljs-string">"/"</span>); <span class="hljs-comment">//divide un string </span>
        <span class="hljs-keyword">this</span>._dia = partes[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">this</span>._mes = partes[<span class="hljs-number">1</span>];
        <span class="hljs-keyword">this</span>._ano = partes[<span class="hljs-number">2</span>];
    }
}

<span class="hljs-keyword">let</span> f = <span class="hljs-keyword">new</span> Fecha();
f.fecha = <span class="hljs-string">"2/1/1968"</span>;
<span class="hljs-built_in">console</span>.log(f.ano); <span class="hljs-comment">//1968</span>
</code></pre>
</body></html>